/*!
 * Loader for TinyMCE / CKEditor
 * Developer: N1ED
 * Website: https://n1ed.com/
 * License: N1ED license (free to use)
 */
!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(module,exports,__webpack_require__){"use strict";!function(){function includeJS(e,t,r){t||(t=document);for(var n=t.getElementsByTagName("script"),o=!1,i=0;i<n.length;i++){var a=n[i].getAttribute("src");a&&-1!==a.indexOf(e)&&(o=!0,n[i])}if(o)return null!=r&&r(!0),null;var l=t.createElement("script");return l.type="text/javascript",null!=r&&(l.readyState?l.onreadystatechange=function(){"loaded"!==l.readyState&&"complete"!==l.readyState||(l.onreadystatechange=null,r(!1))}:l.onload=function(){r(!1)}),l.src=e,t.getElementsByTagName("head")[0].appendChild(l),l}function getLatestVersion(e,t,r,n){var o=new XMLHttpRequest;o.open("POST",e+"cdn/"+t+"/"+r+"/current-version",!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.onload=function(){if(200===this.status){var e=void 0;try{e=JSON.parse(this.response)}catch(e){return void console.log("Unable to parse data from CDN")}n(e)}else console.log("Unable to get the latest version number: CDN returned incorrect data"),console.log(this.response)},o.onerror=function(e){console.log("Unable to get the latest version number: CDN is unreachable"),console.log(e)},o.send()}function removePlaceholderFor(e){if(e&&e.id)for(var t=document.querySelectorAll('[data-n1ed-placeholder="'+e.id+'"]'),r=0;r<t.length;r++)t.item(r).parentElement.removeChild(t.item(r))}function mergeConfigs(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=e[r],o=t[r];null==n||null==o||Array.isArray(n)||Array.isArray(o)||"object"!=typeof n||"object"!=typeof o?e[r]=o:mergeConfigs(n,o)}}function init(){for(var scripts=document.getElementsByTagName("script"),_loop_1=function(i){var script=scripts.item(i);if(!script||!script.src)return"continue";var m=script.src.match(/\/cdn\/([0-9A-Z]{4}|[0-9A-Z]{8})\/n1(ckeditor|tinymce)\.js(\?(.*))?/);if(m&&!script.hasAttribute("data-inited")){script.setAttribute("data-inited","true");var apiKey_1=m[1],editor_1=m[2],params_1={};if(m.length>3&&m[4])for(var paramsStr=m[4].split("&"),j=0;j<paramsStr.length;j++){var paramStr=paramsStr[j],eqIndex=paramStr.indexOf("=");if(eqIndex>-1){var arr=paramStr.split("=",2);params_1[arr[0]]=arr[1]}else params_1[paramStr]=""}var urlBase_1=null,src=script.getAttribute("src");if(src){var matches=src.match(/\/\/((.*?)\.)?cloud.n1ed.com\//);matches&&(urlBase_1=matches[0])}if(!urlBase_1)return console.log("Unknown location"),{value:void 0};urlBase_1=!1===window.N1ED_HTTPS_APP||"false"===getCookie("N1ED_HTTPS_APP")?"http:"+urlBase_1:"https:"+urlBase_1;var urlSuffix_1="";return Object.keys(params_1).length>0&&(urlSuffix_1="?"+Object.keys(params_1).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(params_1[e])})).join("&")),getLatestVersion(urlBase_1,apiKey_1,editor_1,(function(json){var n1edVersion=json.n1edVersion,editorConfig=json.editorConfig;window.n1edConfig=editorConfig;var fileEditor=null;if("ckeditor"===editor_1)fileEditor="ckeditor/ckeditor.js";else{if("tinymce"!==editor_1)return void console.log("Incorrect editor");fileEditor="tinymce/tinymce.min.js"}"tinymce"===editor_1&&(window.tinyMCEPreInit={base:urlBase_1+"cdn/"+apiKey_1+"/"+n1edVersion+"/tinymce",suffix:".min"}),includeJS(urlBase_1+"cdn/"+apiKey_1+"/"+n1edVersion+"/"+fileEditor+urlSuffix_1,document,(function(wasAlreadyLoaded){if(!wasAlreadyLoaded){if("ckeditor"===editor_1){window.CKEDITOR.on("instanceReady",(function(e){removePlaceholderFor(e.editor.element.$)}));var oldReplaceFunc_1=window.CKEDITOR.replace;window.CKEDITOR.replace=function(e,t){var r=JSON.parse(JSON.stringify(editorConfig));t&&mergeConfigs(r,t),oldReplaceFunc_1.apply(this,[e,r])};var oldInlineFunc_1=window.CKEDITOR.inline;window.CKEDITOR.inline=function(e,t){var r=JSON.parse(JSON.stringify(editorConfig));t&&mergeConfigs(r,t),oldInlineFunc_1.apply(this,[e,r])}}else if("tinymce"===editor_1){var oldInitFunc_1=window.tinymce.init;window.tinymce.init=function(config){var resultConfig=JSON.parse(JSON.stringify(editorConfig));for(var key in resultConfig.init_instance_callback=function(e){removePlaceholderFor(document.querySelector(config.selector));var t=e.getContainer();t&&0===t.style.display.indexOf("none")&&e.show()},mergeConfigs(resultConfig,config),resultConfig)resultConfig.hasOwnProperty(key)&&"string"==typeof resultConfig[key]&&0===resultConfig[key].indexOf("function(")&&(resultConfig[key]=eval("("+resultConfig[key]+")"));oldInitFunc_1.apply(this,[resultConfig])}}window.onEditorLoaded&&window.onEditorLoaded()}}))})),{value:void 0}}},i=0;i<scripts.length;i++){var state_1=_loop_1(i);if("object"==typeof state_1)return state_1.value}console.error("Incorrect loader call")}function getCookie(e){var t=document.cookie.match("(^|[^;]+)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():null}init()}()}]);